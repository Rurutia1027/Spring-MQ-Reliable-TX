# Transaction 
A transaction is a sequence of database operations that are executed as a single unit. It ensures **data integrity** and **consistency**, even in the case of system failures. 


## What's ACID ? 

ACID stands for four key properties of a transaction: 

- **Atomicity** - All operations in a transaction succeed or **none do**(all-or-nothing). 
- **Consistency** - The database remains in a **valid state** before and after the transaction. 
- **Isolation** - Transactions do not **interfere** with each other (no partial updates seen).
- **Durability** - Once committed, the transaction's changes are **permannent**, even if the system crashes. 

--- 

## Local Transactions 
A **local transaction** is managed within a single **Relational Database Management System**(RDBMS) or **Database Management System**(DBMS). 

#### Advantages of Local Transactions 
- **Strict ACID Compliance** - Local transactions strictly adhere to **Atomicity**, **Consistency**, **Isolation**, and **Durability**(ACID), ensuring **data integrity** and **reliability**. 
- **Efficient** & **Simple** -- Since transaction states are maintained **only within the DBMS**, the implementation is straightforward and highly efficient. 

#### Limitation of Local Transactions 
- **No Support for Distributed Transactions** - Local transactions are limited to **single database instance** and cannot handle **transactions across multiple databases or services**. 
- **Resource Manager Dependency** - The smallest **unit of isolation** is managed by the *resource manager**, restricting flexibility in multi-database environments. 
- **Process Boundaries** - A local transaction is confined **within a single process**, making it unsuitable for **distributed architectures** where multiple services interact with different databases. 
  

In summary, while **local transactions** are simple and reliable for **single-database operations**, they cannot maintain **ACID properties across multiple datasources**, making them unsuitable for **microservices and distributed systems**. 

--- 

## Global Transactions in the DTP Model: A Standard Approach to Distributed Transactions
### AP (Application Program)
- The core application program that interacts with the DTP(Distributed Transaction Processing) model. It executes business logic and communicates with both the **transaction manager(TM)** and **resource manager(RM)** to manage transactions. 

### RM (Resource Manager)
- Manages access to actual resources like **databases(DBMS)**, or **message queues**. 
- Application programs interact with the RM to read and write data. 
- Must implement the **XA protocol**, ensuring compliance with distributed transaction principles. 

### TM (Transaction Manager)
- **Coordinates** and **manages transactions**, ensuring consistency across multiple RMs. 
- Provides transaction-related APIs for **applications**(APs) and controls the interaction between APs and RMs. 
- Handles **commit** and **rollback** decisions to maintain **data integrity** in distributed environments. 


### XA Protocol 
- The **industry standard** for distributed transactions, defining how a TM interacts with RMs. 
- Supports **Two-Phase Commit**(2PC), ensuring that all involved resources either **commit successfully** or **roll back** in case of failure. 

--- 